# Change Log

All notable changes to this project will be documented in this file.
See [Conventional Commits](https://conventionalcommits.org) for commit guidelines.

## [4.18.5](https://github.com/cozy/cozy-konnector-libs/compare/cozy-konnector-libs@4.18.4...cozy-konnector-libs@4.18.5) (2019-07-30)

**Note:** Version bump only for package cozy-konnector-libs





## [4.18.4](https://github.com/cozy/cozy-konnector-libs/compare/cozy-konnector-libs@4.18.3...cozy-konnector-libs@4.18.4) (2019-07-29)


### Bug Fixes

* bad module.exports change caused unit tests to fail ([2d2347b](https://github.com/cozy/cozy-konnector-libs/commit/2d2347b))
* update cozy-doctypes with cozy-client as peerDependency ([a17d1e6](https://github.com/cozy/cozy-konnector-libs/commit/a17d1e6))
* update cozy-doctypes with cozy-client as peerDependency ([#528](https://github.com/cozy/cozy-konnector-libs/issues/528)) ([79e5e87](https://github.com/cozy/cozy-konnector-libs/commit/79e5e87))
* **deps:** update dependency cozy-doctypes to v1.57.1 ([db7b333](https://github.com/cozy/cozy-konnector-libs/commit/db7b333))
* **deps:** update dependency file-type to v12.1.0 ([6af6cb8](https://github.com/cozy/cozy-konnector-libs/commit/6af6cb8))
* **deps:** update dependency file-type to v12.1.0 ([#527](https://github.com/cozy/cozy-konnector-libs/issues/527)) ([756d85a](https://github.com/cozy/cozy-konnector-libs/commit/756d85a))





## [4.18.3](https://github.com/cozy/cozy-konnector-libs/compare/cozy-konnector-libs@4.18.2...cozy-konnector-libs@4.18.3) (2019-07-22)


### Bug Fixes

* **deps:** update dependency file-type to v12 ([591d122](https://github.com/cozy/cozy-konnector-libs/commit/591d122))
* **deps:** update dependency file-type to v12 ([#496](https://github.com/cozy/cozy-konnector-libs/issues/496)) ([80886bc](https://github.com/cozy/cozy-konnector-libs/commit/80886bc))
* **deps:** update dependency pdfjs-dist to v2.1.266 ([6ff6f34](https://github.com/cozy/cozy-konnector-libs/commit/6ff6f34))
* **deps:** update dependency pdfjs-dist to v2.1.266 ([#514](https://github.com/cozy/cozy-konnector-libs/issues/514)) ([a1b4e2e](https://github.com/cozy/cozy-konnector-libs/commit/a1b4e2e))





## [4.18.2](https://github.com/cozy/cozy-konnector-libs/compare/cozy-konnector-libs@4.18.1...cozy-konnector-libs@4.18.2) (2019-07-19)


### Bug Fixes

* do not try do download a file there is an error in shouldreplace ([5062adf](https://github.com/cozy/cozy-konnector-libs/commit/5062adf))
* Fix Tls test on chained self signed cert ([f5a47e5](https://github.com/cozy/cozy-konnector-libs/commit/f5a47e5))
* last cozy-doctypes make the tests fail ([e1fa77d](https://github.com/cozy/cozy-konnector-libs/commit/e1fa77d))
* remove console.log ([120fc77](https://github.com/cozy/cozy-konnector-libs/commit/120fc77))





## [4.18.1](https://github.com/cozy/cozy-konnector-libs/compare/cozy-konnector-libs@4.18.0...cozy-konnector-libs@4.18.1) (2019-07-08)

**Note:** Version bump only for package cozy-konnector-libs





# [4.18.0](https://github.com/cozy/cozy-konnector-libs/compare/cozy-konnector-libs@4.17.1...cozy-konnector-libs@4.18.0) (2019-06-27)


### Bug Fixes

* cut critical error messages to 32Ko to make their JSON version readable by the stack ([6595639](https://github.com/cozy/cozy-konnector-libs/commit/6595639))
* **deps:** update dependency raw-body to v2.4.1 ([39320b9](https://github.com/cozy/cozy-konnector-libs/commit/39320b9))


### Features

* replace files if we have metadata to add ([c1b0317](https://github.com/cozy/cozy-konnector-libs/commit/c1b0317))
* **saveFiles:** add io.cozy.files data in importedData.json fil‚Ä¶ ([#511](https://github.com/cozy/cozy-konnector-libs/issues/511)) ([c2c1fb4](https://github.com/cozy/cozy-konnector-libs/commit/c2c1fb4))
* **saveFiles:** add io.cozy.files data in importedData.json file when in standalone mode ([dcbf23d](https://github.com/cozy/cozy-konnector-libs/commit/dcbf23d))
* replace files if we have metadata to add ([#513](https://github.com/cozy/cozy-konnector-libs/issues/513)) ([35eb9d9](https://github.com/cozy/cozy-konnector-libs/commit/35eb9d9))





## [4.17.1](https://github.com/cozy/cozy-konnector-libs/compare/cozy-konnector-libs@4.17.0...cozy-konnector-libs@4.17.1) (2019-06-25)


### Bug Fixes

* remove identity log ([916a436](https://github.com/cozy/cozy-konnector-libs/commit/916a436))
* updateOrCreate:  do not change createAt metadata on update ([f420afb](https://github.com/cozy/cozy-konnector-libs/commit/f420afb))





# [4.17.0](https://github.com/cozy/cozy-konnector-libs/compare/cozy-konnector-libs@4.16.0...cozy-konnector-libs@4.17.0) (2019-06-20)


### Bug Fixes

* Fix formating in saveIdentity for phone and address ([5269665](https://github.com/cozy/cozy-konnector-libs/commit/5269665))
* Fix formating in saveIdentity for phone and address ([#501](https://github.com/cozy/cozy-konnector-libs/issues/501)) ([2edb984](https://github.com/cozy/cozy-konnector-libs/commit/2edb984))


### Features

* add cozyMetadata feature to saveFiles ([dfa70ee](https://github.com/cozy/cozy-konnector-libs/commit/dfa70ee))
* add saveIdentity and updateOrCreate as BaseKonnector methods ([3acef7e](https://github.com/cozy/cozy-konnector-libs/commit/3acef7e))
* saveIdentity: move metadata handling to updateOrCreate ([d237474](https://github.com/cozy/cozy-konnector-libs/commit/d237474))





# [4.16.0](https://github.com/cozy/cozy-konnector-libs/compare/cozy-konnector-libs@4.15.17...cozy-konnector-libs@4.16.0) (2019-06-14)


### Features

* Add saveIdentity in cozy-konnector-libs ([d1078cb](https://github.com/cozy/cozy-konnector-libs/commit/d1078cb))
* Add saveIdentity in cozy-konnector-libs ([#497](https://github.com/cozy/cozy-konnector-libs/issues/497)) ([6cf6f35](https://github.com/cozy/cozy-konnector-libs/commit/6cf6f35))





# Changelog

## [Unreleased]

### Changed
- none yet

### Fixed
- none yet

### Added
- none yet

## cozy-jobs-cli@1.0.17, cozy-konnector-libs@4.1.7, cozy-logger@1.1.4 (2018-04-17)

#### :bug: Bug Fix
* `cozy-logger`
  * [#202](https://github.com/konnectors/libs/pull/202) fix: cannot assign from error to object. ([@ptbrowne](https://github.com/ptbrowne))

#### Committers: 1
- Patrick Browne ([ptbrowne](https://github.com/ptbrowne))

## cozy-konnector-libs@4.1.6 (2018-04-17)

#### :rocket: Enhancement
* `cozy-konnector-libs`
  * [#200](https://github.com/konnectors/libs/pull/200) fix: formatting of error is done in cozy-logger. ([@ptbrowne](https://github.com/ptbrowne))

## cozy-konnector-libs@4.1.2 (2018-04-10)

#### :bug: Bug Fix
* `cozy-konnector-libs`
  * [#180](https://github.com/konnectors/libs/pull/180) üêù fix: use target node 8 to remove the need for regeneratorRuntime. ([@ptbrowne](https://github.com/ptbrowne))


## [4.1.0] (2018-04-09)

#### :rocket: Enhancement
* Other
  * [#178](https://github.com/konnectors/libs/pull/178) ‚ú® feat: add lerna changelog. ([@ptbrowne](https://github.com/ptbrowne))
* `cozy-logger`
  * [#177](https://github.com/konnectors/libs/pull/177) feat: if message is an object, its properties are assigned to the log. ([@ptbrowne](https://github.com/ptbrowne))

#### :bug: Bug Fix
* `cozy-jobs-cli`
  * [#172](https://github.com/konnectors/libs/pull/172) fix: yarn dev now works without defining the file source. ([@doubleface](https://github.com/doubleface))

## [4.0.0] - 2018-04-06

### Changed

- `cozy-konnector-libs` : Changed linking mechanism to in-memory
- `cozy-konnector-libs`: `updateOrCreate` is no longer deprecated.
- `cozy-konnector-libs`: transpiled sources are shipped on npm

## [3.8.1] - 2018-03-29

### Fixed

- `cozy-konnector-libs` No longer has bin in package.json. Moved to cozy-konnector-libs.

## [3.8.0] - 2018-03-27

### Added
- `cozy-konnector-libs`: `signin` helper. Should make sign in process to websites easier [#138](https://github.com/cozy/cozy-konnector-libs/pull/138). Big thank you to @carrieje :+1: !
- `cozy-konnector-libs`: banking operation categorized as "health insurance" can be considered for linking with an health bill if its amount is greater than 0 (previously only operation categorized as "health expenses" were considered for linking)
- `cozy-konnector-libs`: bill matching logs are tinier
- `cozy-jobs-cli`: allow to parse an HTML file from the shell

## [3.7.0] - 2018-03-13

- Update cozy-client-js
- Use lerna

## [3.6.0] - 2018-03-12

### Added

- `scrape` function.

## [3.5.3] - 2018-03-08

### Added

- Document class
- saveFiles handles filestreams (Thanks [J√©r√©mie](https://github.com/laedit) !)
- `fetch` function return value is checked to be a Promise

## [3.5.2] - 2018-02-28

### Fixed
- Banking operations cannot have reimbursements total amount be higher than their amount

## [3.5.1] - 2018-02-21

### Fixed

- Default log level is not "debug" instead of "info". The stack filters out
debug logs but "info" are kept.

### Added

- `shouldSave` and `shouldUpdate` functions  can be passed to hydrateAndFilter. It allows for finer grained control over what is saved/updated.

### Deprecated

- `updateOrCreate` is now deprecated. Prefer to use `shouldSave`/`shouldUpdate`.

## [3.3.0] - 2018-01-23

### Added
- Automatic exception handling via Sentry if `process.env.SENTRY_DSN` is set

### Fixed
- Correct status codes are used when exiting from an error
- Yarn dev

## [3.2.4] - 2018-01-23
### Changed
- Fixed linking of health bills to their credit operation when no debit operation found

## [3.2.4] - 2018-01-22
### Changed
- Fixed linking of health bills to operations
- More details when an error message is caught by the BaseKonnector

## [3.2.3] - 2018-01-19
### Changed
- Now by default, mathing bill operation check the range date with - 15 days + 29 days


## [3.2.1] - 2018-01-18
### Fixed
- Remove spread es6 syntax


## [3.2.0] - 2018-01-18
### Changed
- Refactoring of bills and transactions association

### Fixed
- operation.reimbursements can't have same reimbursement


## [3.1.6] - 2018-01-17
### Fixed
- Linking with bank operations also works on first run


## [3.1.5] - 2018-01-10
### Fixed
- Linking with bank operations now works even if the bill has already been fetched

## Details

The format is based on [Keep a Changelog](http://keepachangelog.com/)
and this project adheres to [Semantic Versioning](http://semver.org/).

[Unreleased]: https://github.com/cozy/cozy-konnector-libs/compare/cozy-konnector-libs@4.1.0...HEAD
[4.1.0]: https://github.com/cozy/cozy-konnector-libs/compare/cozy-konnector-libs@4.0.0...4.1.0
[4.0.0]: https://github.com/cozy/cozy-konnector-libs/compare/cozy-konnector-libs@3.8.2...cozy-konnector-libs@4.0.0
[3.8.2]: https://github.com/cozy/cozy-konnector-libs/compare/v3.8.1...v3.8.2
[3.8.1]: https://github.com/cozy/cozy-konnector-libs/compare/v3.8.0...v3.8.1
[3.8.0]: https://github.com/cozy/cozy-konnector-libs/compare/v3.7.0...v3.8.0
[3.7.0]: https://github.com/cozy/cozy-konnector-libs/compare/v3.6.0...v3.7.0
[3.6.0]: https://github.com/cozy/cozy-konnector-libs/compare/v3.5.3...v3.6.0
[3.5.3]: https://github.com/cozy/cozy-konnector-libs/compare/v3.5.2...v3.5.3
[3.5.2]: https://github.com/cozy/cozy-konnector-libs/compare/v3.5.1...v3.5.2
[3.5.1]: https://github.com/cozy/cozy-konnector-libs/compare/v3.3.0...v3.5.1
[3.3.0]: https://github.com/cozy/cozy-konnector-libs/compare/v3.2.5...v3.3.0
[3.2.5]: https://github.com/cozy/cozy-konnector-libs/compare/v3.2.4...v3.2.5
[3.2.4]: https://github.com/cozy/cozy-konnector-libs/compare/v3.2.3...v3.2.4
[3.2.3]: https://github.com/cozy/cozy-konnector-libs/compare/v3.2.2...v3.2.3
[3.2.2]: https://github.com/cozy/cozy-konnector-libs/compare/v3.2.1...v3.2.2
[3.2.1]: https://github.com/cozy/cozy-konnector-libs/compare/v3.2.0...v3.2.1
[3.2.0]: https://github.com/cozy/cozy-konnector-libs/compare/v3.1.6...v3.2.0
[3.1.6]: https://github.com/cozy/cozy-konnector-libs/compare/176b49b...v3.1.6
[3.1.5]: https://github.com/cozy/cozy-konnector-libs/compare/8b00eda...176b49b
